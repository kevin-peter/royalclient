(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[14],{140:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a(17),s=a(16),i=a(3),r=a(6),l=a(7),d=a(2),o=a(5),u=a(8),b=a(18),j=a(28),m=a(72),p=(a(73),a(40)),O=a(76),h=a(87),f=a(88),g=(a(77),a(1));t.default=function(e){var t=Object(d.useContext)(b.b),a=Object(o.p)(),x=a.eventid,v=a.market,N=a.eventtype,y=Object(d.useState)(!1),w=Object(l.a)(y,2),k=w[0],_=w[1],S=Object(d.useState)(!1),C=Object(l.a)(S,2),T=(C[0],C[1],Object(d.useState)([])),B=Object(l.a)(T,2),I=B[0],M=B[1],z=Object(d.useState)([]),F=Object(l.a)(z,2),P=F[0],R=F[1],E=Object(d.useState)([]),H=Object(l.a)(E,2),J=H[0],L=H[1],A=Object(d.useState)([]),q=Object(l.a)(A,2),V=q[0],U=q[1],Y=Object(d.useState)([]),D=Object(l.a)(Y,2),G=D[0],K=D[1],Q=Object(d.useState)([]),W=Object(l.a)(Q,2),X=W[0],Z=W[1],$=Object(d.useState)([]),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ne=Object(d.useState)([]),ce=Object(l.a)(ne,2),se=ce[0],ie=ce[1],re=Object(d.useState)([]),le=Object(l.a)(re,2),de=le[0],oe=le[1],ue=Object(d.useState)([]),be=Object(l.a)(ue,2),je=(be[0],be[1]),me=Object(d.useState)({}),pe=Object(l.a)(me,2),Oe=pe[0],he=pe[1],fe=Object(d.useState)(""),ge=Object(l.a)(fe,2),xe=ge[0],ve=ge[1],Ne=Object(d.useState)(),ye=Object(l.a)(Ne,2),we=ye[0],ke=ye[1],_e=Object(d.useState)("alert-success"),Se=Object(l.a)(_e,2),Ce=Se[0],Te=Se[1],Be=Object(d.useState)(!1),Ie=Object(l.a)(Be,2),Me=(Ie[0],Ie[1],Object(d.useState)(0)),ze=Object(l.a)(Me,2),Fe=(ze[0],ze[1],Object(d.useState)("")),Pe=Object(l.a)(Fe,2),Re=(Pe[0],Pe[1],Object(d.useState)({})),Ee=Object(l.a)(Re,2),He=(Ee[0],Ee[1],Object(d.useState)({})),Je=Object(l.a)(He,2);Je[0],Je[1];Object(d.useEffect)((function(){Ve(),Le(),Ae(),Ue();var e=setInterval((function(){Ve(),Le(),Ue(),Ae()}),2e3);return function(){clearInterval(e)}}),[]);var Le=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:x,main_market_id:v},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.royalrunbet.com/api/v1/event/getMarketsC",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&M(e.data),e.players&&R(e.players)})).catch((function(e){console.log(e)})).finally((function(){_(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ae=function(){var a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization","Bearer "+localStorage.getItem("jwt"));var n;n={event_id:x};var c={method:"POST",headers:a,body:JSON.stringify(n)};fetch("https://api.royalrunbet.com/api/v1/event/getSelRuners",c).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&(ae([].concat(Object(s.a)(te),Object(s.a)(e.confirmedMarkets))),ie(e.confirmedPlayers),oe(e.expMarket),je(e.amtTaken),U([].concat(Object(s.a)(V),Object(s.a)(e.data))),K([].concat(Object(s.a)(G),Object(s.a)(e.system))),Z(e.markets),e.bal.length>0&&(t.setItem("bal",e.bal[0].amount),t.setItem("exp",e.bal[0].exposer)))})).catch((function(){_(!1)}))},qe=function(t,a,n){if(_(!0),1==t.target.checked){var c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization","Bearer "+localStorage.getItem("jwt"));var i;i={event_id:x,market_id:a.market_id,runnerId:a.id,runner_name:a.name,sequence:a.sequence,team:a.team,main_market_id:a.main_market_id,eventType:N,eventStatus:J};var r={method:"POST",headers:c,body:JSON.stringify(i)};fetch("https://api.royalrunbet.com/api/v1/event/selectRunner",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&(U([].concat(Object(s.a)(n),[e.runner[0].id])),K([].concat(Object(s.a)(G),[e.runner[0].id])),Ae(),ke(e.message),Te("alert-success"))})).catch((function(){_(!1)}))}else Z(X.filter((function(e){return e!==a.market_id}))),function(t,a,n){if(_(!0),0==t.target.checked){var c,s=new Headers;s.append("Content-Type","application/json"),s.append("Authorization","Bearer "+localStorage.getItem("jwt")),c={event_id:x,market_id:a.market_id,runnerId:a.id,sequence:a.sequence,team:a.team};var i={method:"POST",headers:s,body:JSON.stringify(c)};fetch("https://api.royalrunbet.com/api/v1/event/unSelectRunner",i).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&(U(V.filter((function(t){return!e.data.includes(t)}))),K(G.filter((function(t){return!e.data.includes(t)}))),oe(e.expMarket),je("1")),ke(e.message),Te("alert-success"),_(!1)})).catch((function(){_(!1)}))}}(t,a),console.log("false data")},Ve=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:x},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.royalrunbet.com/api/v1/event/getEventStatus",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(t){1===t.event_timeout&&e.navigate("/events"),t.data[0]&&L(t.data[0])})).catch((function(e){console.log(e)})).finally((function(){_(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ue=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:x,main_market_id:v},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.royalrunbet.com/api/v1/event/getButtons",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&ve(e.data)})).catch((function(e){console.log(e)})).finally((function(){}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ye=function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ke(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(e,t){he((function(a){return Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e,t))}))},Ge=function(){window.history.back()};return k?Object(g.jsx)(j.a,{}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"row",children:I.map((function(a,i){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"col-12 col-md-3 p-0",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsxs)("div",{className:"card-header text-center",children:[Object(g.jsx)("button",{className:"btn btn-sm btn-secondary float-left",onClick:Ge,children:"Back"}),Object(g.jsxs)("span",{className:"badge badge-pill badge-warning text-border font-weight-bold title-e text-center",children:[Object(g.jsx)(p.b,{className:"w-6 text-dark"}),J.event_name]})]}),Object(g.jsx)("div",{className:"card-body",children:Object(g.jsxs)("div",{className:"col-12 btn btn-sm btn-light",children:[Object(g.jsxs)("div",{className:"card-title",children:[Object(g.jsx)("span",{className:"float-left title-m badge badge-dark text-center",children:a.market_name}),Object(g.jsxs)("span",{className:"float-right text-danger badge badge-pill badge-warning",children:["Exp: ",de[a.id]?de[a.id]:0]})]}),0==te.includes(a.id)?null==a.visible||1==a.parent_visible?Object(g.jsxs)("div",{className:"container mt-4",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsxs)("ul",{className:"list-group",children:[Object(g.jsxs)("li",{className:"list-group-item list-group-item-info",children:[J.team1," "]}),P.map((function(e,t){return e.market_id==a.id&&1==e.team?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[0===J.bet_lock&&0==a.parent_locked?Object(g.jsx)("input",{type:"checkbox",onChange:function(t){var a=Object(s.a)(V),n=a.indexOf(e.id);-1!==n?a.splice(n,1):a.push(e.id),qe(t,e,a)},checked:V.includes(e.id),disabled:G.includes(e.id)},e.id):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"lock"}),Object(g.jsx)(O.a,{className:"w-6"})]}),Object(g.jsx)("span",{className:"display-1 badge badge-info badge-pill ",children:e.name})]},e.id)}):null}))]})},i),Object(g.jsx)("div",{className:"col",children:Object(g.jsxs)("ul",{className:"list-group",children:[Object(g.jsxs)("li",{className:"list-group-item list-group-item-info",children:[J.team2," "]}),P.map((function(e,t){return e.market_id==a.id&&2==e.team?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[0===J.bet_lock&&0==a.parent_locked?Object(g.jsx)("input",{type:"checkbox",onChange:function(t){var a=Object(s.a)(V),n=a.indexOf(e.id);-1!==n?a.splice(n,1):a.push(e.id),qe(t,e,a)},checked:V.includes(e.id),disabled:G.includes(e.id)},e.id):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"lock"}),Object(g.jsx)(O.a,{className:"w-6"})]}),Object(g.jsx)("span",{className:"badge badge-info badge-pill",children:e.name})]},e.id)}):null}))]})})]},i),Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"col mt-2 ",children:0===J.bet_lock&&0==a.parent_locked?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("button",{className:"btn btn-sm btn-dark mr-1 ",onClick:function(e){return t=a.id,s=Oe[a.id],s-=1,void he((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},t,s))}));var t,s},children:"-"}),Object(g.jsx)("input",{placeholder:"Bet Amount",type:"number",value:Oe[a.id],onChange:function(e){return De(a.id,e.target.value)},maxLength:"50",className:"mb-2 text-center w-50",required:!0}),Object(g.jsx)("button",{className:"btn btn-sm btn-dark ml-1 ",onClick:function(e){return t=a.id,s=Oe[a.id],s+=1,void he((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},t,s))}));var t,s},children:"+"})]}),Object(g.jsx)("div",{className:"text-center",children:xe&&xe.map((function(e,t){return Object(g.jsx)("button",{type:"button",className:"mr-1 mt-1 btn btn-sm "+(Oe[a.id]==e.b_value?"btn-warning":"btn-dark"),onClick:function(){return De(a.id,e.b_value)},children:e.b_name})}))}),Object(g.jsx)("div",{className:"text-center mt-2",children:Object(g.jsx)(u.b,{to:"#",className:"btn btn-lg btn-success btn-outline-red btn-block",onClick:function(){return function(a){if(!X.includes(a.id))return ke("Empty selection box, select player again!"),Te("alert-danger"),!1;if(!Oe[a.id])return ke("Bet amount required!"),Te("alert-danger"),!1;_(!0);var n=new Headers;n.append("Content-Type","application/json"),n.append("Authorization","Bearer "+t.getItem("jwt"));var c={event_id:x,market_id:a.id,event_name:J.event_name,amount:Oe[a.id],main_market_id:a.main_market_id,selection:!0},s={method:"POST",headers:n,body:JSON.stringify(c)};fetch("https://api.royalrunbet.com/api/v1/event/confirmPlayers",s).then((function(t){if(200===t.status&&Te("alert-success"),403!==t.status)return t.json();e.navigate("/login")})).then((function(e){Le(),Ae(),ke(e.message),e.success||Te("alert-danger")})).catch((function(e){console.log(e)})).finally((function(){_(!1)}))}(a)},disabled:!0,children:"Bet Place "})})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(u.b,{to:"#",className:"btn btn-lg btn-dark float-left btn-block disabled",children:[Object(g.jsx)(O.a,{className:""}),"Bet Place"]})})})})]},i):Object(g.jsx)("div",{className:"container mt-4",children:"This Market unavailable to bet."}):Object(g.jsx)("div",{className:"container mt-4",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsxs)("ul",{className:"list-group",children:[Object(g.jsx)("li",{className:"list-group-item list-group-item-info",children:"User (You)"}),se.map((function(e,t){return e.market_id==a.id&&"user"==e.type?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{className:"list-group-item list-group-item-info d-flex justify-content-between align-items-center",children:[Object(g.jsx)(h.a,{className:"w-6 text-success"}),Object(g.jsx)("i",{className:"badge badge-success badge-pill",children:e.runner_name})]})}):null}))]})},i),Object(g.jsx)("div",{className:"col",children:Object(g.jsxs)("ul",{className:"list-group",children:[Object(g.jsx)("li",{className:"list-group-item list-group-item-secondary",children:"System"}),se.map((function(e,t){return e.market_id==a.id&&"system"==e.type?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("li",{className:"list-group-item list-group-item-secondary d-flex justify-content-between align-items-center",children:[Object(g.jsx)(h.a,{className:"w-6 text-secondary"}),Object(g.jsx)("i",{className:"badge badge-secondary badge-pill",children:e.runner_name})]})}):null}))]})}),Object(g.jsxs)("div",{className:"col-12 mt-1",children:[Object(g.jsx)("i",{className:"text-success",children:"Players Confirmed"}),Object(g.jsxs)("span",{children:[Object(g.jsx)(f.a,{className:"ml-1 w-6 text-success"})," ","VS"," ",Object(g.jsx)(f.a,{className:"ml-1 w-6 text-secondary"})]})]})]},i)},i)]},i)},i)]},i)},i)})}))},"markets"),we&&Object(g.jsx)(m.a,{message:we,closeMessage:Ye,className:Ce})]})}},70:function(e,t,a){"use strict";var n=a(2),c=a(1);t.a=function(e){return Object(n.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(c.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(c.jsx)("h3",{className:"modal-title right badge badge-dark",id:"exampleModalLabel",children:e.sub_title}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:e.children}),Object(c.jsx)("div",{className:"modal-footer"})]})})}),Object(c.jsx)("div",{className:"modal-backdrop fade show"})]})}},72:function(e,t,a){"use strict";a(2);var n=a(1);t.a=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"alert ".concat(e.className?e.className:"alert-success"," alert-dismissible slideUp show "),role:"alert",style:{position:"fixed",width:"auto",right:"10px",bottom:"0"},children:[e.message,Object(n.jsx)("button",{onClick:e.closeMessage,type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",style:{padding:"7px"},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})}},73:function(e,t,a){"use strict";a(7),a(2),a(70),a(18),a(1)},76:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}));t.a=c},87:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}));t.a=c},88:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))}));t.a=c}}]);