(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[18],{145:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a(17),s=a(16),i=a(3),r=a(6),l=a(7),d=a(2),o=a(5),u=a(8),b=a(18),j=a(28),m=a(72),p=(a(73),a(40)),O=a(76),h=a(88),f=(a(77),a(1));t.default=function(e){var t=Object(d.useContext)(b.b),a=Object(o.p)(),g=a.eventid,v=a.market,x=a.eventtype,N=Object(d.useState)(!1),k=Object(l.a)(N,2),w=k[0],y=k[1],_=Object(d.useState)(!1),S=Object(l.a)(_,2),C=(S[0],S[1],Object(d.useState)([])),T=Object(l.a)(C,2),B=T[0],I=T[1],P=Object(d.useState)([]),M=Object(l.a)(P,2),z=M[0],F=M[1],E=Object(d.useState)([]),H=Object(l.a)(E,2),J=H[0],R=H[1],A=Object(d.useState)([]),L=Object(l.a)(A,2),q=L[0],V=L[1],U=Object(d.useState)([]),Y=Object(l.a)(U,2),D=Y[0],G=Y[1],K=Object(d.useState)([]),Q=Object(l.a)(K,2),W=Q[0],X=Q[1],Z=Object(d.useState)([]),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ae=Object(d.useState)([]),ne=Object(l.a)(ae,2),ce=ne[0],se=ne[1],ie=Object(d.useState)([]),re=Object(l.a)(ie,2),le=re[0],de=re[1],oe=Object(d.useState)([]),ue=Object(l.a)(oe,2),be=(ue[0],ue[1]),je=Object(d.useState)({}),me=Object(l.a)(je,2),pe=me[0],Oe=me[1],he=Object(d.useState)(""),fe=Object(l.a)(he,2),ge=fe[0],ve=fe[1],xe=Object(d.useState)(),Ne=Object(l.a)(xe,2),ke=Ne[0],we=Ne[1],ye=Object(d.useState)("alert-success"),_e=Object(l.a)(ye,2),Se=_e[0],Ce=_e[1],Te=Object(d.useState)(!1),Be=Object(l.a)(Te,2),Ie=(Be[0],Be[1],Object(d.useState)(0)),Pe=Object(l.a)(Ie,2),Me=(Pe[0],Pe[1],Object(d.useState)("")),ze=Object(l.a)(Me,2),Fe=(ze[0],ze[1],Object(d.useState)({})),Ee=Object(l.a)(Fe,2),He=(Ee[0],Ee[1],Object(d.useState)({})),Je=Object(l.a)(He,2);Je[0],Je[1];Object(d.useEffect)((function(){qe(),Re(),Ae(),Ve();var e=setInterval((function(){qe(),Re(),Ve(),Ae()}),2e3);return function(){clearInterval(e)}}),[]);var Re=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:g,main_market_id:v},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.munimji.co/api/v1/event/getMarketsC",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&I(e.data),e.players&&F(e.players)})).catch((function(e){console.log(e)})).finally((function(){y(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ae=function(){var a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization","Bearer "+localStorage.getItem("jwt"));var n;n={event_id:g,main_market_id:v};var c={method:"POST",headers:a,body:JSON.stringify(n)};fetch("https://api.munimji.co/api/v1/event/getSelRunersSingle",c).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&(te([].concat(Object(s.a)(ee),Object(s.a)(e.confirmedMarkets))),se(e.confirmedPlayers),de(e.expMarket),be(e.amtTaken),V(e.data),G([].concat(Object(s.a)(D),Object(s.a)(e.system))),X(e.markets),e.bal.length>0&&(t.setItem("bal",e.bal[0].amount),t.setItem("exp",e.bal[0].exposer))),y(!1)})).catch((function(){y(!1)}))},Le=function(t,a,n){if(y(!0),1==t.target.checked){var c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization","Bearer "+localStorage.getItem("jwt"));var s;s={event_id:g,market_id:a.market_id,runnerId:a.id,runner_name:a.name,sequence:a.sequence,team:a.team,main_market_id:a.main_market_id,eventType:x,eventStatus:J};var i={method:"POST",headers:c,body:JSON.stringify(s)};fetch("https://api.munimji.co/api/v1/event/selectSingleRunner",i).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&(Ae(),we(e.message),Ce("alert-success"))})).catch((function(){y(!1)}))}else X(W.filter((function(e){return e!==a.market_id}))),function(t,a,n){if(y(!0),0==t.target.checked){var c,s=new Headers;s.append("Content-Type","application/json"),s.append("Authorization","Bearer "+localStorage.getItem("jwt")),c={event_id:g,market_id:a.market_id,runnerId:a.id,sequence:a.sequence,team:a.team};var i={method:"POST",headers:s,body:JSON.stringify(c)};fetch("https://api.munimji.co/api/v1/event/unSelectSingleRunner",i).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){1==e.success&&Ae(),we(e.message),Ce("alert-success"),y(!1)})).catch((function(){y(!1)}))}}(t,a),console.log("false data")},qe=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:g},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.munimji.co/api/v1/event/getEventStatus",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(t){1===t.event_timeout&&e.navigate("/events"),t.data[0]&&R(t.data[0])})).catch((function(e){console.log(e)})).finally((function(){y(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ve=function(){var a=Object(r.a)(Object(i.a)().mark((function a(n){var c,s,r;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c={event_id:g,main_market_id:v},(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),r={method:"POST",headers:s,redirect:"follow",body:JSON.stringify(c)},fetch("https://api.munimji.co/api/v1/event/getButtons",r).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&ve(e.data)})).catch((function(e){console.log(e)})).finally((function(){}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Ue=function(){var e=Object(r.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e,t){Oe((function(a){return Object(c.a)(Object(c.a)({},a),{},Object(n.a)({},e,t))}))},De=function(){window.history.back()};return w?Object(f.jsx)(j.a,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"row",children:B.map((function(a,i){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"col-12 col-md-3 p-0",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsxs)("div",{className:"card-header text-center",children:[Object(f.jsx)("button",{className:"btn btn-sm btn-secondary float-left",onClick:De,children:"Back"}),Object(f.jsxs)("span",{className:"badge badge-pill badge-warning text-border font-weight-bold title-e text-center",children:[Object(f.jsx)(p.b,{className:"w-6 text-dark"}),J.event_name]})]}),Object(f.jsx)("div",{className:"card-body",children:Object(f.jsxs)("div",{className:"col-12 btn btn-sm btn-light",children:[Object(f.jsxs)("div",{className:"card-title",children:[Object(f.jsx)("span",{className:"float-left title-m badge badge-dark text-center",children:a.market_name}),Object(f.jsxs)("span",{className:"float-right text-danger badge badge-pill badge-warning",children:["Exp: ",le[a.id]?le[a.id]:0]})]}),0==ee.includes(a.id)?null==a.visible||1==a.parent_visible?Object(f.jsxs)("div",{className:"container mt-4",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("ul",{className:"list-group",children:[Object(f.jsxs)("li",{className:"list-group-item list-group-item-info",children:[J.team1," "]}),z.map((function(e,t){return e.market_id==a.id&&1==e.team?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[0===J.bet_lock&&0==a.parent_locked?Object(f.jsx)("input",{type:"checkbox",onChange:function(t){var a=Object(s.a)(q),n=a.indexOf(e.id);-1!==n?a.splice(n,1):a.push(e.id),Le(t,e)},checked:q.includes(e.id),disabled:D.includes(e.id)},e.id):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"lock"}),Object(f.jsx)(O.a,{className:"w-6"})]}),Object(f.jsx)("span",{className:"display-1 badge badge-info badge-pill ",children:e.name})]},e.id)}):null}))]})},i),Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("ul",{className:"list-group",children:[Object(f.jsxs)("li",{className:"list-group-item list-group-item-info",children:[J.team2," "]}),z.map((function(e,t){return e.market_id==a.id&&2==e.team?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[0===J.bet_lock&&0==a.parent_locked?Object(f.jsx)("input",{type:"checkbox",onChange:function(t){var a=Object(s.a)(q),n=a.indexOf(e.id);-1!==n?a.splice(n,1):a.push(e.id),Le(t,e)},checked:q.includes(e.id),disabled:D.includes(e.id)},e.id):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"lock"}),Object(f.jsx)(O.a,{className:"w-6"})]}),Object(f.jsx)("span",{className:"badge badge-info badge-pill",children:e.name})]},e.id)}):null}))]})})]},i),Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col mt-2 ",children:0===J.bet_lock&&0==a.parent_locked?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)("button",{className:"btn btn-sm btn-dark mr-1 ",onClick:function(e){return t=a.id,s=pe[a.id],s-=1,void Oe((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},t,s))}));var t,s},children:"-"}),Object(f.jsx)("input",{placeholder:"Bet Amount",type:"number",value:pe[a.id],onChange:function(e){return Ye(a.id,e.target.value)},maxLength:"50",className:"mb-2 text-center w-50",required:!0}),Object(f.jsx)("button",{className:"btn btn-sm btn-dark ml-1 ",onClick:function(e){return t=a.id,s=pe[a.id],s+=1,void Oe((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(n.a)({},t,s))}));var t,s},children:"+"})]}),Object(f.jsx)("div",{className:"text-center",children:ge&&ge.map((function(e,t){return Object(f.jsx)("button",{type:"button",className:"mr-1 mt-1 btn btn-sm "+(pe[a.id]==e.b_value?"btn-warning":"btn-dark"),onClick:function(){return Ye(a.id,e.b_value)},children:e.b_name})}))}),Object(f.jsx)("div",{className:"text-center mt-2",children:Object(f.jsx)(u.b,{to:"#",className:"btn btn-lg btn-success btn-outline-red btn-block",onClick:function(){return function(a){if(!W.includes(a.id))return we("Empty selection box, select player again!"),Ce("alert-danger"),!1;if(!pe[a.id])return we("Bet amount required!"),Ce("alert-danger"),!1;y(!0);var n=new Headers;n.append("Content-Type","application/json"),n.append("Authorization","Bearer "+t.getItem("jwt"));var c={event_id:g,market_id:a.id,event_name:J.event_name,amount:pe[a.id],main_market_id:a.main_market_id,selection:!0},s={method:"POST",headers:n,body:JSON.stringify(c)};fetch("https://api.munimji.co/api/v1/event/confirmPlayers",s).then((function(t){if(200===t.status&&Ce("alert-success"),403!==t.status)return t.json();e.navigate("/login")})).then((function(e){Re(),Ae(),we(e.message),e.success||Ce("alert-danger")})).catch((function(e){console.log(e)})).finally((function(){y(!1)}))}(a)},disabled:!0,children:"Bet Place "})})]}):Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(u.b,{to:"#",className:"btn btn-lg btn-dark float-left btn-block disabled",children:[Object(f.jsx)(O.a,{className:""}),"Bet Place"]})})})})]},i):Object(f.jsx)("div",{className:"container mt-4",children:"This Market unavailable to bet."}):Object(f.jsx)("div",{className:"container mt-4",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col",children:Object(f.jsxs)("ul",{className:"list-group",children:[Object(f.jsx)("li",{className:"list-group-item list-group-item-info bold",children:"Your Player Pairs"}),ce.map((function(e,t){return e.market_id==a.id&&"user"==e.type?Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("li",{className:"list-group-item list-group-item-info d-flex align-items-center",children:[Object(f.jsx)(h.a,{className:"w-6 text-success"}),Object(f.jsx)("span",{className:"ml-4 bold center",children:e.runner_name}),Object(f.jsx)("span",{className:"ml-4 bold center",children:1===e.team?J.team1:2===e.team?J.team2:"-"})]})}):null}))]})},i),Object(f.jsxs)("div",{className:"col-12 mt-1",children:[Object(f.jsx)("i",{className:"text-success",children:"Players Confirmed"}),Object(f.jsxs)("span",{children:[Object(f.jsx)(h.a,{className:"ml-1 w-6 text-success"})," ","VS"," ",Object(f.jsx)(h.a,{className:"ml-1 w-6 text-secondary"})]})]})]},i)},i)]},i)},i)]},i)},i)})}))},"markets"),ke&&Object(f.jsx)(m.a,{message:ke,closeMessage:Ue,className:Se})]})}},70:function(e,t,a){"use strict";var n=a(2),c=a(1);t.a=function(e){return Object(n.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(c.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(c.jsx)("h3",{className:"modal-title right badge badge-dark",id:"exampleModalLabel",children:e.sub_title}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body",children:e.children}),Object(c.jsx)("div",{className:"modal-footer"})]})})}),Object(c.jsx)("div",{className:"modal-backdrop fade show"})]})}},72:function(e,t,a){"use strict";a(2);var n=a(1);t.a=function(e){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"alert ".concat(e.className?e.className:"alert-success"," alert-dismissible slideUp show "),role:"alert",style:{position:"fixed",width:"auto",right:"10px",bottom:"0"},children:[e.message,Object(n.jsx)("button",{onClick:e.closeMessage,type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",style:{padding:"7px"},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})}},73:function(e,t,a){"use strict";a(7),a(2),a(70),a(18),a(1)},76:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}));t.a=c},88:function(e,t,a){"use strict";var n=a(2);var c=n.forwardRef((function(e,t){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))}));t.a=c}}]);