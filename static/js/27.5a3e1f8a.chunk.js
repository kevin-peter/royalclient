(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[27],{159:function(e,t,a){"use strict";a.r(t);var c=a(12),n=a(17),s=a(7),l=a(2),r=a(18),o=a(70),i=a(1);t.default=function(e){var t=Object(l.useContext)(r.b),a=Object(l.useState)(""),d=Object(s.a)(a,2),m=d[0],u=d[1],p=Object(l.useState)(""),j=Object(s.a)(p,2),b=j[0],h=j[1],O=Object(l.useState)(""),x=Object(s.a)(O,2),f=x[0],g=x[1],v=Object(l.useState)(""),N=Object(s.a)(v,2),y=N[0],w=N[1],_=Object(l.useState)(""),C=Object(s.a)(_,2),S=C[0],L=C[1],k=Object(l.useState)(0),P=Object(s.a)(k,2),R=P[0],I=P[1],M=Object(l.useState)(t.getItem("bal")),q=Object(s.a)(M,2),T=q[0],U=q[1],A=Object(l.useState)(t.getItem("bal")),B=Object(s.a)(A,1)[0],E=Object(l.useState)([]),z=Object(s.a)(E,2),D=z[0],F=z[1],H=Object(l.useState)(!1),J=Object(s.a)(H,2),V=J[0],W=J[1],G=Object(l.useState)(""),K=Object(s.a)(G,2),Q=K[0],X=K[1],Y=Object(l.useState)("5"),Z=Object(s.a)(Y,2),$=Z[0],ee=Z[1],te=[{id:"",text:"Select Role"}];e.role&&e.role<2&&te.push({id:3,text:"Admin"}),e.role&&e.role<3&&te.push({id:3,text:"Master"}),e.role&&e.role<4&&te.push({id:4,text:"Super Master"}),e.role&&e.role<5&&te.push({id:5,text:"Client"});var ae=D.map((function(e,t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",defaultChecked:!0,value:!(D.length>0)||D[t].visible,type:"checkbox",onChange:function(){!function(e,t){var a=D.map((function(a){return a.play_mode===e?Object(n.a)(Object(n.a)({},a),{},{visible:t}):a}));F(a)}(e.play_mode,!D[t].visible)}}),Object(i.jsx)("label",{className:"form-check-label",children:e.play})]})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"text",value:D.length>0?e.partnership:"",className:"form-control",readOnly:!0})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"number",min:"0",max:e.partnership,onChange:function(t){!function(e,t){var a=parseInt(t.target.value);("undefined"===a||a<0||Number.isNaN(a))&&(a=0);var c=D.map((function(t){return t.play_mode===e?Object(n.a)(Object(n.a)({},t),{},{ownership:parseInt(t.partnership-a),downline:a}):t}));F(c)}(e.play_mode,t)},className:"form-control",readOnly:"5"===$,required:!0})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"text",value:D.length>0?e.ownership:"",className:"form-control",readOnly:!0})})]},t)}));return Object(i.jsx)(o.a,{closeModal:e.closeModal,title:"Create NEW Admin/OPERATOR",children:Object(i.jsx)("div",{className:"col-12",children:Object(i.jsx)("form",{className:"mt-3",autoComplete:"off",onSubmit:function(t){t.preventDefault();var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded"),a.append("Authorization","Bearer "+localStorage.getItem("jwt"));var n=new URLSearchParams;n.append("name",m),n.append("email",b),n.append("password",y),n.append("re_password",S),n.append("free_chip",R),n.append("mainBalance",T),n.append("balance",B),n.append("type",$),n.append("remark",f);var s,l=Object(c.a)(D);try{for(l.s();!(s=l.n()).done;){var r=s.value;n.append("active_".concat(r.play),r.visible?"on":""),n.append("downline_".concat(r.play),r.downline)}}catch(o){l.e(o)}finally{l.f()}fetch("https://api.munimji.co/api/v1/addUser",{method:"POST",headers:a,body:n}).then((function(e){if(401!==e.status)return e.json();W(!1)})).then((function(t){t&&t.success?e.modelClose("alert-success",t.message):(X(t.message),setTimeout((function(e){X("")}),2e3)),W(!1)})).catch((function(e){W(!1)}))},children:Object(i.jsxs)("div",{className:"form-row",children:[Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("input",{className:"form-control name",placeholder:"Name",type:"text",value:m,onChange:function(e){return u(e.target.value)},maxLength:"20",required:!0})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("input",{className:"form-control email",placeholder:"Username",type:"text",value:b,onChange:function(e){return h(e.target.value)},pattern:"[^\\s]+",title:"please dont use the white space :)",maxLength:"12",required:!0})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("input",{className:"form-control password",placeholder:"Password",type:"password",onChange:function(e){return w(e.target.value)},value:y,autoComplete:"off",minLength:"6",maxLength:"20",required:!0})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("input",{className:"form-control password",placeholder:"Re-Password",type:"password",onChange:function(e){return L(e.target.value)},value:S,autoComplete:"off",minLength:"6",maxLength:"20",required:!0})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("input",{className:"form-control",placeholder:"Free Chip",type:"number",onChange:function(e){I(e.target.value),U(parseInt(B-e.target.value))},min:"0",max:B,required:!0})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("select",{name:"userstype",className:"form-control",onChange:function(e){ee(e.target.value),function(e){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),t.append("Authorization","Bearer "+localStorage.getItem("jwt"));var a=new URLSearchParams;fetch("https://api.munimji.co/api/v1/getPartnership",{method:"POST",headers:t,body:a}).then((function(e){if(401!==e.status)return e.json()})).then((function(e){var t;e&&e.success&&(t=e.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{ownership:e.partnership,downline:"",visible:!0})})),F(t))}))}()},required:!0,children:te.map((function(e,t){return Object(i.jsx)("option",{value:e.id,children:e.text},t)}))})}),Object(i.jsxs)("div",{className:"col-6 form-group mt-1 input__custom",children:[Object(i.jsx)("label",{children:"Remaining Chips"}),Object(i.jsx)("input",{type:"text",value:T,readOnly:!0,className:"form-control"})]}),Object(i.jsxs)("div",{className:"col-6 form-group mt-1 input__custom",children:[Object(i.jsx)("label",{children:"Current Chips"}),Object(i.jsx)("input",{type:"text",name:"cbalance",defaultValue:B,readOnly:!0,className:"form-control"})]}),Object(i.jsxs)("div",{className:"col-12 form-group",children:[Object(i.jsx)("label",{children:"Remark"}),Object(i.jsx)("input",{maxLength:"100",placeholder:"Reference",type:"text",defaultValue:f,onChange:function(e){return g(e.target.value)},className:"form-control"})]}),ae.length>0&&Object(i.jsx)("div",{className:"col-12 table-reponsive",children:Object(i.jsxs)("table",{className:"table table-bordered table-sm",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{width:"10%",children:"Play Type"}),Object(i.jsx)("th",{width:"30%",children:"UpLine"}),Object(i.jsx)("th",{width:"30%",children:"Downline"}),Object(i.jsx)("th",{width:"30%",children:"Our Part"})]})}),Object(i.jsx)("tbody",{children:ae.length>0&&ae})]})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("button",{title:"Create User",type:"submit",disabled:V,className:"btn btn-sm btn-theme btn-primary",children:"Create"})}),Object(i.jsx)("div",{className:"col-6 form-group mt-1 input__custom",children:Object(i.jsx)("button",{className:"btn btn-sm btn-danger float-right",onClick:e.modelClose,children:"Cancel"})}),Object(i.jsx)("div",{className:"form-group col-12",children:Q&&Object(i.jsx)("p",{className:"alert alert-danger",children:Q})})]})})})})}},70:function(e,t,a){"use strict";var c=a(2),n=a(1);t.a=function(e){return Object(c.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(n.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(n.jsx)("h3",{className:"modal-title right badge badge-dark",id:"exampleModalLabel",children:e.sub_title}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:e.children}),Object(n.jsx)("div",{className:"modal-footer"})]})})}),Object(n.jsx)("div",{className:"modal-backdrop fade show"})]})}}}]);