(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[12],{118:function(e,t,a){"use strict";var c=a(2);var n=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),c.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"}))}));t.a=n},120:function(e,t,a){"use strict";var c=a(2);var n=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"}))}));t.a=n},136:function(e,t,a){"use strict";a.r(t);var c=a(16),n=a(3),s=a(6),r=a(7),l=a(2),i=a(8),o=a(18),d=a(72),b=a(97),u=a(77),j=a.n(u),p=a(76),m=a(120),O=a(118),h=a(40),x=a(1);t.default=function(e){var t=Object(l.useContext)(o.b),a=Object(l.useState)(!1),u=Object(r.a)(a,2),f=u[0],v=u[1],g=Object(l.useState)([]),w=Object(r.a)(g,2),k=w[0],N=w[1],y=Object(l.useState)([]),_=Object(r.a)(y,2),S=(_[0],_[1],Object(l.useState)(!1)),M=Object(r.a)(S,2),C=M[0],E=M[1],T=(new Date).toLocaleString("en-US"),B=((new Date).toLocaleTimeString(),Object(l.useState)("")),H=Object(r.a)(B,2),I=H[0],L=H[1],Y=Object(l.useState)(""),z=Object(r.a)(Y,2),R=z[0],A=z[1],D=Object(l.useState)(),F=Object(r.a)(D,2),J=F[0],P=F[1],U=Object(l.useState)("alert alert-success"),V=Object(r.a)(U,2),q=(V[0],V[1]),G=function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(""),A(""),E(!1),K();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){K();var e=setInterval((function(){K()}),1e3);return function(){clearInterval(e)}}),[]);var K=function(){var a=Object(s.a)(Object(n.a)().mark((function a(c){var s;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:v(!0),(s=new Headers).append("Content-Type","application/json"),s.append("Authorization","Bearer "+t.getItem("jwt")),fetch("https://api.royalrunbet.com/api/v1/event/getevents",{method:"POST",headers:s}).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&N(e.data)})).catch((function(e){console.log(e)})).finally((function(){v(!1)}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Q=function(){var t=Object(s.a)(Object(n.a)().mark((function t(a,r,l,i){var o,d,b;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(!0),(o=new Headers).append("Content-Type","application/json"),o.append("Authorization","Bearer "+localStorage.getItem("jwt")),d={event_id:l.event_id},"status"===r?(d.status=a,d.bet_lock=l.bet_lock):"bet_lock"===r&&(d.bet_lock=a,d.status=l.status),b={method:"POST",headers:o,body:JSON.stringify(d)},fetch("https://api.royalrunbet.com/api/v1/setting/updateEventStatus",b).then((function(t){if(401!==t.status)return t.json();e.navigate("/login")})).then((function(e){if(e.message){var t=Object(c.a)(k);"status"===r?t[i].status=a:"bet_lock"===r&&(t[i].bet_lock=a),P(e.message),q("alert alert-success")}})).catch((function(e){P(e),q("alert alert-danger")})).finally(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){q(""),P("")}),3e3),v(!1);case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return t.stop()}}),t)})));return function(e,a,c,n){return t.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[k.length>0?Object(x.jsx)("div",{className:"row",children:k.map((function(t,a){return 1===t.parent_status&&j()(t.closedate).isAfter(j()(T))&&Object(x.jsx)("div",{className:"col-12 col-md-5 p-0",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)(i.b,{className:5===e.role?"btn btn-sm btn-light":"btn btn-sm btn-white",to:5!==e.role||0!==t.parent_bet_lock||j()(t.opendate).isBefore(T)?"#":"/marketlist/"+t.event_id+"/"+t.type,onClick:function(){return 5===e.role&&1===t.parent_bet_lock?P("Event locked"):P(!1)},children:[Object(x.jsxs)("p",{className:"card-text",children:[Object(x.jsx)(h.b,{className:"icon-cricket w-10"}),Object(x.jsx)("span",{className:"title-e badge badge-warning text-center",children:t.event_name}),1===t.parent_bet_lock&&Object(x.jsx)(p.a,{className:"icon-lock w-10"}),j()(t.opendate).isBefore(T)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{className:"icon-lock w-10"}),Object(x.jsx)(m.a,{className:"icon-ClockIcon w-10 text-secondary ",title:"OFF TIME"}),Object(x.jsx)("small",{className:"text-muted float-right badge",children:"TIME OUT"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(m.a,{className:"icon-ClockIcon w-10 text-success"}),Object(x.jsx)("small",{className:"text-muted float-right badge",children:j()(t.opendate).format("DD/MM/YYYY HH:mm A")})]})]}),Object(x.jsxs)("p",{className:"card-text",children:[Object(x.jsx)(h.c,{className:"text-success ml-2"}),j()(t.opendate).format("DD/MM/YYYY HH:mm A"),Object(x.jsx)(h.c,{className:"text-danger ml-2"}),j()(t.closedate).format("DD/MM/YYYY HH:mm A")]})]}),5!==e.role?Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"col-12",children:[Object(x.jsx)("button",{title:"Event Status",onClick:Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(null!==t.status&&!t.status,"status",t,a);case 2:case"end":return e.stop()}}),e)}))),className:"btn btn-sm ".concat((null===t.status||!0===Boolean(t.status))&&t.parent_status?"btn-success":"btn-danger"),disabled:f||!t.parent_status,children:Object(x.jsx)(O.a,{className:"w-6"})}),Object(x.jsx)("button",{title:"Event Bet Lock",onClick:Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(null!==t.bet_lock&&!t.bet_lock,"bet_lock",t,a);case 2:case"end":return e.stop()}}),e)}))),className:"btn btn-sm me-1 ml-1 ".concat(null===t.bet_lock||!1===Boolean(t.bet_lock)?t.parent_bet_lock?"btn-danger":"btn-success":"btn-danger"),disabled:f||t.parent_bet_lock,children:Object(x.jsx)(p.a,{className:"w-6"})}),Object(x.jsx)("button",{title:"Market Setting",onClick:function(){E(!0),L(t.event_id),A(t.event_name)},className:"btn btn-sm btn-dark ml-1 shadow",children:"Markets"})]})}):null]})})},a)}))}):Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-12 col-md-4 p-0",children:Object(x.jsx)("div",{className:"card",children:Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)("p",{className:"card-text",children:" No Event Found!"})})})},"0")}),C&&Object(x.jsx)(b.a,{title:R,event_id:I,closeModal:G}),J&&Object(x.jsx)(d.a,{message:J,closeMessage:W})]})}},70:function(e,t,a){"use strict";var c=a(2),n=a(1);t.a=function(e){return Object(c.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"modal fade show",id:"create_new_party",tabIndex:-1,"aria-labelledby":"exampleModalLabel","aria-modal":"true",role:"dialog",style:{display:"block",paddingLeft:"0px"},children:Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-lg model-content-box",children:Object(n.jsxs)("div",{className:"modal-content rounded-0 ".concat(e.className?e.className:"blue-light-bg"),children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsx)("h3",{className:"modal-title center badge badge-pill badge-warning",id:"exampleModalLabel",children:e.title}),""!=e.sub_title&&Object(n.jsx)("h3",{className:"modal-title right badge badge-dark",id:"exampleModalLabel",children:e.sub_title}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(t){e.closeModal()},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsx)("div",{className:"modal-body",children:e.children}),Object(n.jsx)("div",{className:"modal-footer"})]})})}),Object(n.jsx)("div",{className:"modal-backdrop fade show"})]})}},72:function(e,t,a){"use strict";a(2);var c=a(1);t.a=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"alert ".concat(e.className?e.className:"alert-success"," alert-dismissible slideUp show "),role:"alert",style:{position:"fixed",width:"auto",right:"10px",bottom:"0"},children:[e.message,Object(c.jsx)("button",{onClick:e.closeMessage,type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",style:{padding:"7px"},children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})})}},76:function(e,t,a){"use strict";var c=a(2);var n=c.forwardRef((function(e,t){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),c.createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))}));t.a=n},97:function(e,t,a){"use strict";var c=a(16),n=a(3),s=a(6),r=a(7),l=a(2),i=a(70),o=a(18),d=a(118),b=a(76),u=a(1);t.a=function(e){var t=Object(l.useContext)(o.b),a=Object(l.useState)(e.title),j=Object(r.a)(a,2),p=(j[0],j[1],Object(l.useState)(e.event_id)),m=Object(r.a)(p,2),O=m[0],h=(m[1],Object(l.useState)(!1)),x=Object(r.a)(h,2),f=x[0],v=x[1],g=Object(l.useState)([]),w=Object(r.a)(g,2),k=w[0],N=w[1],y=Object(l.useState)([]),_=Object(r.a)(y,2),S=(_[0],_[1]),M=Object(l.useState)(),C=Object(r.a)(M,2),E=(C[0],C[1]),T=Object(l.useState)("alert alert-success"),B=Object(r.a)(T,2),H=(B[0],B[1]);Object(l.useEffect)((function(){I()}),[]);var I=function(){var a=Object(s.a)(Object(n.a)().mark((function a(c){var s,r,l;return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:v(!0),s={event_id:O},(r=new Headers).append("Content-Type","application/json"),r.append("Authorization","Bearer "+t.getItem("jwt")),l={method:"POST",headers:r,redirect:"follow",body:JSON.stringify(s)},fetch("https://api.royalrunbet.com/api/v1/event/getMarkets",l).then((function(t){if(403!==t.status)return t.json();e.navigate("/login")})).then((function(e){e.data&&N(e.data),e.players&&S(e.players)})).catch((function(e){console.log(e)})).finally((function(){v(!1)}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),L=function(){var t=Object(s.a)(Object(n.a)().mark((function t(a,r,l,i){var o,d,b;return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(!0),(o=new Headers).append("Content-Type","application/json"),o.append("Authorization","Bearer "+localStorage.getItem("jwt")),d={event_id:l.event_id,type_name:l.market_name,market_id:l.id},"visible"===r?(d.visible=a,d.locked=l.locked):"locked"===r&&(d.locked=a,d.visible=l.visible),d.type=r,b={method:"POST",headers:o,body:JSON.stringify(d)},fetch("https://api.royalrunbet.com/api/v1/event/updateMarketStatus",b).then((function(t){if(401!==t.status)return t.json();e.navigate("/login")})).then((function(e){if(e.message){var t=Object(c.a)(k);"visible"===r?t[i].visible=a:"locked"===r&&(t[i].locked=a),E(e.message),H("alert alert-success")}})).catch((function(e){E(e),H("alert alert-danger")})).finally(Object(s.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){H(""),E("")}),3e3),v(!1);case 2:case"end":return e.stop()}}),e)}))));case 9:case"end":return t.stop()}}),t)})));return function(e,a,c,n){return t.apply(this,arguments)}}();return Object(u.jsx)(i.a,{closeModal:e.closeModal,title:e.event_id?"Markets: "+e.title:"",children:Object(u.jsx)("div",{className:"model-table-content",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-12 p-0",children:Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{className:"table table-bordered table-striped table-sm table-dark",children:[Object(u.jsx)("thead",{className:"",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{width:"5%",className:"text-center px-2 py-0.5",children:"Sr."}),Object(u.jsx)("th",{className:"px-2 py-1 text-left",children:"Name"}),Object(u.jsx)("th",{className:"px-2 py-1 text-left",children:"Event ID"}),Object(u.jsx)("th",{className:"px-2 py-1 text-left",children:"Runner (per Team)"}),Object(u.jsx)("th",{className:"px-2 py-1 text-center",children:"Status"}),Object(u.jsx)("th",{className:"px-2 py-1 text-center",children:"Locked"}),Object(u.jsx)("th",{className:"px-2 py-1 text-center",children:"Action"})]})}),Object(u.jsx)("tbody",{children:k.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"text-center px-2 py-1",width:"5%",children:t+1}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.market_name}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.event_id}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-left",children:e.runner_count}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-center",children:Object(u.jsx)("button",{title:"Market Status",onClick:Object(s.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L(null!==e.visible&&!e.visible,"visible",e,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm ".concat((null===e.visible||!0===Boolean(e.visible))&&e.parent_visible?"btn-success":"btn-danger"),disabled:f||!e.parent_visible,children:Object(u.jsx)(d.a,{className:"w-6"})})}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-center",children:Object(u.jsx)("button",{title:"Market Lock",onClick:Object(s.a)(Object(n.a)().mark((function a(){return Object(n.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,L(null!==e.locked&&!e.locked,"locked",e,t);case 2:case"end":return a.stop()}}),a)}))),className:"btn btn-sm me-1 ".concat(null===e.locked||!1===Boolean(e.locked)?e.parent_locked?"btn-danger":"btn-success":"btn-danger"),disabled:f||e.parent_locked,children:Object(u.jsx)(b.a,{className:"w-6"})})}),Object(u.jsx)("td",{className:"px-2 py-0.5 text-center"})]},t)}))})]})})})},"markets")})})}}}]);