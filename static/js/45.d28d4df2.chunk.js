(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[45],{152:function(e,t,r){"use strict";r.r(t);var a=r(3),n=r(6),s=r(7),c=r(2),o=r(5),u=r(18),i=(r(28),r(1));t.default=function(){Object(c.useContext)(u.b);var e=Object(o.n)(),t=Object(o.p)(),r=(t.eventid,t.eventtype,Object(c.useState)(!1)),l=Object(s.a)(r,2),d=l[0],p=l[1],m=Object(c.useState)(""),j=Object(s.a)(m,2),b=j[0],h=j[1],f=Object(c.useState)(""),O=Object(s.a)(f,2),x=O[0],w=O[1],v=Object(c.useState)(""),g=Object(s.a)(v,2),N=g[0],y=g[1],C=Object(c.useState)(""),S=Object(s.a)(C,2),k=S[0],P=S[1],L=function(){var t=Object(n.a)(Object(a.a)().mark((function t(r){var n,s;return Object(a.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),N===k){t.next=5;break}return h("Error : New passwords do not match"),setTimeout((function(){return h("")}),3e3),t.abrupt("return");case 5:return p(!0),t.prev=6,t.next=9,fetch("".concat("https://api.munimji.co/api/v1","/user/changepassword"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify({current_password:x,new_password:N,new_confirm_password:k})});case 9:if(403!==(n=t.sent).status){t.next=13;break}return e("/login"),t.abrupt("return");case 13:return t.next=15,n.json();case 15:s=t.sent,h(s.message),setTimeout((function(){return h("")}),3e3),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(6),h("An error occurred. Please try again."),setTimeout((function(){return h("")}),3e3);case 24:return t.prev=24,p(!1),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,20,24,27]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=Object(n.a)(Object(a.a)().mark((function e(t){return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(""),y(""),P("");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"container",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-sm-9 col-md-7 col-lg-5 mx-auto",children:Object(i.jsx)("div",{className:"card rounded shadow my-5",children:Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h5",{className:"card-title text-center",children:"Change Password"}),Object(i.jsx)("hr",{}),Object(i.jsxs)("form",{className:"form-inline",autoComplete:"off",onSubmit:L,children:[Object(i.jsx)("div",{className:"text-center",children:b&&Object(i.jsx)("span",{className:"px-2 py-1 ".concat(b.toLowerCase().includes("error")?"alert alert-danger":"alert alert-success"),children:b})}),Object(i.jsx)("div",{className:"form-group mt-1",children:Object(i.jsx)("input",{placeholder:"Old Password",type:"password",value:x,onChange:function(e){return w(e.target.value)},className:"form-control form-control-lg",maxLength:"50",autoComplete:"current-password",required:!0})}),Object(i.jsx)("div",{className:"form-group mt-1",children:Object(i.jsx)("input",{placeholder:"New Password",type:"password",value:N,onChange:function(e){return y(e.target.value)},className:"form-control form-control-lg",maxLength:"50",autoComplete:"new-password",required:!0})}),Object(i.jsx)("div",{className:"form-group mt-1",children:Object(i.jsx)("input",{placeholder:"Confirm Password",type:"password",value:k,onChange:function(e){return P(e.target.value)},className:"form-control form-control-lg",maxLength:"50",autoComplete:"new-password",required:!0})}),Object(i.jsx)("div",{className:"clear-both h-0 col-span-12"}),Object(i.jsxs)("div",{className:"form-group mt-3",children:[Object(i.jsx)("button",{type:"submit",disabled:d,className:"btn btn-md btn-theme",children:d?"Loading...":"Change Password"}),Object(i.jsx)("button",{type:"button",className:"btn btn-sm btn-danger ml-3",onClick:function(){return T()},children:"Cancel"})]})]})]})})})})})}}}]);