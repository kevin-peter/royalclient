(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[40],{168:function(e,t,s){"use strict";s.r(t);var n=s(17),a=s(16),l=s(9),c=s(10),i=s(29),r=s(13),o=s(14),d=s(2),u=s.n(d),m=s(8),p=s(121),h=s(76),b=s(151),x=s(28),j=s(166),f=s(1),g=function(e){var t=e.menuItems,s=e.onMenuItemClick,n=e.closeDropDown,a=e.active_user,l=e.changeUserSatus,c=e.index;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"fixed top-0 right-0 h-full w-full",onClick:n}),Object(f.jsx)("div",{className:"",children:Object(f.jsx)(j.a,{as:"div",children:function(e){return Object(f.jsx)(f.Fragment,{children:e&&Object(f.jsxs)("div",{className:"fixed top-10 right-0 right-0 mt-5 z-10 w-56 origin-top-right divide-y divide-primary-800 rounded-md bg-primary-900 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[Object(f.jsx)(j.a.Option,{className:"list-none",children:Object(f.jsx)("p",{role:"button",className:"w-full block px-4 py-2 text-center bg-black dark:bg-primary-700 text-white",children:a.p_code})}),Object(f.jsx)(j.a.Option,{className:"list-none",children:Object(f.jsx)("p",{role:"button",className:"w-full block px-4 py-2 text-center bg-primary-900 hover:bg-primary-700 ".concat(a.status?"text-green-500":"text-pink-500"),onClick:function(){l(a,"visible",!a.status,c),n()},children:a.status?"Active":"InActive"})}),Object(f.jsx)(j.a.Option,{className:"list-none",children:Object(f.jsxs)("p",{onClick:function(){l(a,"locked",!a.bet_lock,c),n()},role:"button",className:"w-full block px-4 py-2 text-center bg-primary-900  hover:bg-primary-700 ".concat(a.bet_lock?"text-pink-500":"text-green-500"),children:["BET ",a.bet_lock?"OFF":"ON"]})}),t.map((function(e,t){return Object(f.jsx)(j.a.Option,{value:e.label,className:"list-none",children:function(t){var a=t.active,l=t.selected;return Object(f.jsx)("p",{role:"button",onClick:function(){s(e),n()},className:"w-full block px-4 py-2 text-sm bg-primary-700 hover:bg-primary-700 hover:text-white ".concat(a?"bg-primary-800 text-white":"bg-primary-900 text-primary-300"," ").concat(l&&"font-semibold"),children:e.label})}},t)}))]})})}})})]})},O=s(18),w=u.a.lazy((function(){return Promise.all([s.e(2),s.e(30)]).then(s.bind(null,107))})),y=u.a.lazy((function(){return s.e(36).then(s.bind(null,160))})),v=u.a.lazy((function(){return s.e(37).then(s.bind(null,161))})),k=u.a.lazy((function(){return s.e(39).then(s.bind(null,162))})),S=u.a.lazy((function(){return s.e(25).then(s.bind(null,163))})),N=u.a.lazy((function(){return s.e(38).then(s.bind(null,164))})),_=function(e){if(Object(d.useEffect)((function(){var t=function(){e.modelClose("","",!0)};return window.addEventListener("popstate",t),function(){window.removeEventListener("popstate",t)}}),[]),e.modeltype&&"ms"===e.modeltype)return Object(f.jsx)(u.a.Suspense,{fallback:Object(f.jsx)(x.a,{}),children:Object(f.jsx)(w,{modelClose:e.modelClose,title:e.mtitle,children:Object(f.jsx)(v,Object(n.a)(Object(n.a)({},e),{},{modelClose:e.modelClose,user:e.user}))})});if(e.modeltype&&("wd"===e.modeltype||"dp"===e.modeltype))return Object(f.jsx)(u.a.Suspense,{fallback:Object(f.jsx)(x.a,{}),children:Object(f.jsx)(w,{modelClose:e.modelClose,title:e.mtitle,children:Object(f.jsx)(S,Object(n.a)(Object(n.a)({},e),{},{modeltype:e.modeltype,modelClose:e.modelClose,mtitle:e.mtitle,user:e.user}))})});if(e.modeltype&&("withdraw"===e.modeltype||"deposit"===e.modeltype))return Object(f.jsx)(u.a.Suspense,{fallback:Object(f.jsx)(x.a,{}),children:Object(f.jsx)(w,{modelClose:e.modelClose,title:e.mtitle,children:Object(f.jsx)(N,Object(n.a)(Object(n.a)({},e),{},{modeltype:e.modeltype,modelClose:e.modelClose,mtitle:e.mtitle,user:e.user}))})});if(e.modeltype&&"cs"===e.modeltype){var t=[{play:"Select Mode",visible:1,id:0}].concat(Object(a.a)(e.play_mods));return Object(f.jsx)(u.a.Suspense,{fallback:Object(f.jsx)(x.a,{}),children:Object(f.jsx)(w,{modelClose:e.modelClose,title:e.mtitle,children:Object(f.jsx)(k,{modes:t,user:e.user,modelClose:e.modelClose})})})}return e.modeltype&&"aduser"===e.modeltype?Object(f.jsx)(u.a.Suspense,{fallback:Object(f.jsx)(x.a,{}),children:Object(f.jsx)(w,{modelClose:e.modelClose,title:e.mtitle,children:Object(f.jsx)(y,Object(n.a)(Object(n.a)({},e),{},{user:e.user,modelClose:e.modelClose}))})}):void 0},C=(s(108),function(e){Object(r.a)(s,e);var t=Object(o.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).closeDropDown=function(){n.setState({showside:!1,active_user:{}})},n.closeBook=function(){n.setState({exp:!1})},n.withDrawAmount=function(e){n.setState({modeltype:"wd",ptitle:"Withdraw Chips From "+e.p_code,modeluser:e}),window.history.pushState({dummyUrl:!0},null,null)},n.dipositeAmount=function(e){n.setState({modeltype:"dp",ptitle:"Deposite Chips To "+e.p_code,modeluser:e}),window.history.pushState({dummyUrl:!0},null,null)},n.changeSetting=function(e){n.setState({modeltype:"cs",ptitle:"User Settings Of "+e.p_code,modeluser:e}),window.history.pushState({dummyUrl:!0},null,null)},n.modeSetting=function(e){n.setState({modeltype:"ms",ptitle:"Sport Settinng Of "+e.p_code,mode:!0,modeluser:e}),window.history.pushState({dummyUrl:!0},null,null)},n.setPl=function(e){var t=e.up_line<0&&e.u_role<5||e.up_line>0&&e.u_role>4?"withdraw":"deposit",s=e.up_line<0&&e.u_role<5||e.up_line>0&&e.u_role>4?"Deposit to Pocket Of ".concat(e.p_code):"Withdraw from Pocket Of ".concat(e.p_code);n.setState({modeltype:t,ptitle:s,modeluser:e}),window.history.pushState({dummyUrl:!0},null,null)},n.modelClose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";arguments.length>2&&void 0!==arguments[2]&&arguments[2]||window.history.go(-1),"aduser"!==n.state.modeltype&&"wd"!==n.state.modeltype&&"withdraw"!==n.state.modeltype&&"dp"!==n.state.modeltype&&"deposit"!==n.state.modeltype||(n.getAllUsers(n.state.flash_user),n.getProfile()),n.setState({modeltype:!1,mode:!1,modeluser:!1,message:t,alertclass:e},(function(){setTimeout((function(){n.setState({message:""})}),2e3)}))},n.addUser=function(){n.setState({modeltype:"aduser",ptitle:"Add New User",modeluser:!1}),window.history.pushState({dummyUrl:!0},null,null)},n.changeUserSatus=function(e,t,s,l){n.setState({cng_usr:!0});var c=new Headers;c.append("Content-Type","application/json"),c.append("Authorization","Bearer "+localStorage.getItem("jwt"));var i={user_id:e.id};"visible"===t?i.visible=s:"locked"===t&&(i.locked=s);var r={method:"POST",headers:c,body:JSON.stringify(i)};fetch("https://api.munimji.co/api/v1/user/changeStatus",r).then((function(e){if(401!==e.status)return e.json();window.location.href="/login"})).then((function(e){var c=1;if(e&&e.success){var i=Object(a.a)(n.state.users);"visible"===t?i[l].status=s:"locked"===t&&(i[l].bet_lock=s),n.setState({users:Object(a.a)(i)})}else c=1;n.setMessage(e.message,c)})).finally((function(){setTimeout((function(){n.setState({cng_usr:!1})}),3e3)}))},n.setMessage=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;n.setState({message:e,alertclass:t},(function(){setTimeout((function(){n.setState({message:"",alertclass:""})}),s)}))},n.resetPassword=function(e){if(window.confirm("Resettin Password For "+e.p_code+"?")){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),t.append("Authorization","Bearer "+localStorage.getItem("jwt"));var s=new URLSearchParams;e&&e.id&&s.append("user_id",e.id),fetch("https://api.munimji.co/api/v1/user/resetpassword",{method:"POST",headers:t,body:s}).then((function(e){if(401!==e.status)return e.json();window.location.href="/login"})).then((function(e){n.setMessage(e.message,1,7e3)}))}},n.handleMenuItemClick=function(e){var t=e.link,s=e.action;"function"===typeof s?s.call(Object(i.a)(n),n.state.active_user):(n.context.setItem("active_user",n.state.active_user),n.props.navigate(t))},n.state={isError:!1,modeltype:!1,users:[],parent:{},pname:"",user_ids:[],ptitle:"",modeluser:!1,mode:!1,message:"",loading:!0,exp:!1,sw:"",alertclass:1,flash_user:{},cng_usr:!1},n}return Object(c.a)(s,[{key:"componentDidMount",value:function(){this.getAllUsers(this.state.flash_user);var e=[{label:"Create Client/Master",action:this.addUser},{label:"Free Chip Deposit",action:this.dipositeAmount},{label:"Free Chip Withdraw",action:this.withDrawAmount},{label:"Account Statement",link:"/report/accountstatement"},{label:"Profit Loss",link:"/report/profitloss"},{label:"Sports P/L",link:"/report/accountsummary"},{label:"Live Bets",link:"/report/livebet"},{label:"Bet History",link:"/report/mybets"},{label:"Settings",action:this.changeSetting},{label:"Sport Settings",action:this.modeSetting},{label:"Reset Password",action:this.resetPassword}];this.setState({menu:e})}},{key:"componentWillUnmount",value:function(){clearInterval(this.ref_user)}},{key:"getProfile",value:function(){var e=this,t=new URLSearchParams;fetch("https://api.munimji.co/api/v1/user/profile",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")},body:t,method:"POST"}).then((function(t){if(401!==t.status)return t.json();e.setState({isLoggenin:!1},(function(){window.location.href="/login"}))})).then((function(t){if(t.data&&t.data.profile){var s={exp:t.data.profile[0].exposer,bal:t.data.profile[0].amount};e.props.updateBal(s)}}))}},{key:"getAllUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Headers,l=new URLSearchParams;n.append("Content-Type","application/x-www-form-urlencoded"),n.append("Authorization","Bearer "+localStorage.getItem("jwt"));var c=Object(a.a)(this.state.user_ids);if(t&&t.id)l.append("user_id",t.id),c.includes(t.id)||c.push(t.id);else{s||c.pop();c.length>0&&(l.append("user_id",c[c.length-1]),c[c.length-1]),this.setState({flash_user:{u_id:c[c.length-1]}})}t&&t.type&&l.append("type",t.type),t&&t.uname&&l.append("uname",t.uname),fetch("https://api.munimji.co/api/v1/user/getusers",{method:"POST",headers:n,body:l,redirect:"follow"}).then((function(e){if(401!==e.status)return e.json();window.location.href="/login"})).then((function(s){s&&s.success&&e.setState({user_ids:c,users:s.data?s.data:[],isError:!1,parent:t,loading:!1,pname:s.data.parent?s.data.parent:t.p_code})}))}},{key:"render",value:function(){var e=this,t=Object(a.a)(this.state.users),s=[],l=this.context;return t&&t.length>0&&(s=t.map((function(t,s){return Object(f.jsxs)("tr",{className:"px-2 text-black ".concat(s%2===0?"bg-light":"bg-white"),children:[Object(f.jsx)("td",{className:"px-2 text-center",children:s+1}),Object(f.jsxs)("td",{className:"text-left kbr-sticky-col text-black",children:[t.u_role>4&&Object(f.jsx)("button",{className:"px-2 py-1 badge text-white bg-primary",children:"C"}),4===t.u_role&&Object(f.jsx)("button",{className:"px-2 py-1 badge text-white bg-success",children:"M"}),3===t.u_role&&Object(f.jsx)("button",{className:"px-2 py-1 badge text-white bg-success",children:"SM"}),Object(f.jsx)("span",{role:"button",onClick:function(s){e.setState({flash_user:t},(function(){e.getAllUsers(t)}))},title:t.name,className:"p-1 badge badge-secondary",children:t.p_code})]}),Object(f.jsx)("td",{className:"px-2 text-right",children:t.name}),Object(f.jsx)("td",{className:"px-2 text-right ".concat(t.pl<0?"text-danger":"text-success"),children:t.pl}),Object(f.jsx)("td",{className:"px-2 text-right ".concat(t.up_line<0&&t.u_role<5||t.up_line>0&&t.u_role>4?"text-danger":"text-success"),onClick:function(){e.setPl(t)},children:Object(f.jsx)("span",{role:"button",className:"text-center w-10 py-1 px-2 rounded-full transition-all duration-300 ".concat(t.up_line<0&&t.u_role<5||t.up_line>0&&t.u_role>4?"text-danger":"text-success"),children:t.u_role<5?t.up_line:-1*t.up_line})}),Object(f.jsx)("td",{className:"px-2 text-right ".concat(t.amount<0?"text-danger":"text-success"),children:t.amount}),Object(f.jsx)("td",{onClick:function(){e.setState({modaluser:t,exp:!0})},className:"px-2 text-right ".concat(t.exposer<0?"text-danger":"text-success"),children:t.exposer}),Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("button",{onClick:function(n){n.preventDefault(),e.changeUserSatus(t,"visible",!t.status,s)},title:t.status?"Active":"Deactive",className:"text-white border-0 ".concat(t.status?"bg-success":"bg-danger"),children:Object(f.jsx)(p.a,{className:"w-6 p-1"})})}),Object(f.jsx)("td",{className:"text-center",children:Object(f.jsx)("button",{onClick:function(n){n.preventDefault(),e.changeUserSatus(t,"locked",!t.bet_lock,s)},title:t.bet_lock?"bet lock":"bet unlock",className:"text-white border-0 ".concat(t.bet_lock?"bg-danger":"bg-success"),children:Object(f.jsx)(h.a,{className:"w-6 h-6 p-1"})})}),Object(f.jsx)("td",{className:"px-2 text-left",children:Object(f.jsxs)("div",{className:"",children:[0===e.state.user_ids.length&&Object(f.jsxs)(u.a.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){e.withDrawAmount(t)},title:"Withdraw Amount",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"W"}),Object(f.jsx)("button",{onClick:function(){e.dipositeAmount(t)},title:"Deposite Amount",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"D"}),Object(f.jsx)("button",{onClick:function(){e.changeSetting(t)},title:"Change Settings",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"SS"}),Object(f.jsx)("button",{onClick:function(){return e.resetPassword(t)},title:"Reset Password",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"R/P"}),Object(f.jsx)("button",{onClick:function(){e.modeSetting(t)},title:"Mode Setting",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"Mode"})]}),Object(f.jsx)(m.b,{to:{pathname:"".concat("","/report/accountstatement")},onClick:function(){l.setItem("active_user",t)},title:"Account Statement",className:"bg-info text-white text-center w-12 ml-2 px-2 border-0",children:"A/C"}),Object(f.jsx)(m.b,{to:{pathname:"".concat("","/report/profitloss")},onClick:function(){l.setItem("active_user",t)},title:"Profit And Loss",className:"bg-info text-white text-center w-12 ml-2 px-2",children:"P/L"})]})}),Object(f.jsx)("td",{className:"px-2 text-right",children:t.remark})]},s)}))),Object(f.jsx)(u.a.Fragment,{children:Object(f.jsxs)("div",{className:"container-fluid content-report",children:[Object(f.jsxs)("div",{className:"p-0",children:[Object(f.jsx)("div",{className:"p-0 float-left text-black dark:text-white",children:Object(f.jsx)("div",{className:"flex content-center",children:this.state.user_ids.length>0&&Object(f.jsxs)(u.a.Fragment,{children:[Object(f.jsx)("button",{title:"go Back",className:"mt-1 btn btn-sm btn-theme shadow",onClick:function(t){t.preventDefault(),e.getAllUsers(e.flash_user)},children:Object(f.jsx)(b.a,{className:"w-6 h-6"})}),Object(f.jsx)("strong",{className:"ml-2 h-6",children:this.state.pname})]})})}),Object(f.jsx)("div",{className:"flex content-center text-sm float-left",children:Object(f.jsxs)("form",{onSubmit:function(t){t.preventDefault();var s={};s.uname=e.state.sw,s.type="ser",e.getAllUsers(s)},children:[Object(f.jsx)("input",{type:"search",required:!0,value:this.state.sw,onInput:function(t){return e.setState({sw:t.target.value,flash_user:{}},(function(){t.target.value||e.getAllUsers(e.state.flash_user)}))},placeholder:"Search User",className:"border-b border-blue-600 focus:border-blue-500 text-center text-primary-800 dark:text-white focus:bg-primary-100 dark:bg-primary-700 outline-none w-1/2"}),Object(f.jsx)("button",{type:"submit",title:"go for search",className:"ml-2 btn btn-sm btn-theme shadow",children:"Go"}),this.state.sw.length>0&&Object(f.jsx)("button",{type:"reset",onClick:function(t){return e.setState({sw:"",flash_user:{}},(function(){e.getAllUsers(e.state.flash_user)}))},title:"reset search",className:"ml-2 btn btn-sm btn-theme shadow",children:"X"})]})}),Object(f.jsxs)("div",{className:"flex content-center text-sm float-right px-2",children:[Object(f.jsx)("label",{className:"text-xs text-black dark:text-white leading-5",children:"Add User"}),Object(f.jsxs)("button",{title:"Add New User",type:"button",className:"ml-2 btn btn-sm btn-theme shadow",onClick:function(t){e.addUser()},children:[" ","+"]})]})]}),this.state.modeltype&&Object(f.jsx)(_,Object(n.a)(Object(n.a)({},this.props),{},{modelClose:this.modelClose,mtitle:this.state.ptitle,user:this.state.modeluser,modeltype:this.state.modeltype})),Object(f.jsx)("h1",{className:"text-center text-success text-sm",children:Object(f.jsx)("span",{className:"mb-0 text-center text-sm",children:"-: User List :-"})}),Object(f.jsx)("div",{className:"table-responsive",children:Object(f.jsxs)("table",{className:"table table-bordered table-striped table-sm report-table",children:[Object(f.jsx)("thead",{className:"text-black bg-secondary",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"text-center px-2",children:"SR."}),Object(f.jsx)("th",{className:"text-left px-2",children:"User Name"}),Object(f.jsx)("th",{className:"text-right px-2",children:"Full Name"}),Object(f.jsx)("th",{className:"text-right px-2",children:"P&L"}),Object(f.jsx)("th",{className:"text-right px-2",children:"General"}),Object(f.jsx)("th",{className:"text-right px-2",children:"Balance"}),Object(f.jsx)("th",{className:"text-right px-2",children:"Exposer"}),Object(f.jsx)("th",{className:"text-center px-2",children:"Status"}),Object(f.jsx)("th",{className:"text-center px-2",children:"Bet Lock"}),Object(f.jsx)("th",{className:"text-left px-2",children:"Options"}),Object(f.jsx)("th",{className:"text-left px-2",children:"Remark"})]})}),Object(f.jsx)("tbody",{children:s.length>0&&s})]})}),this.state.loading&&Object(f.jsx)(x.a,{}),this.state.showside&&Object(f.jsx)(g,{menuItems:this.state.menu,selectedOption:"Details",onMenuItemClick:function(t){e.handleMenuItemClick(t)},index:this.state.index,changeUserSatus:this.changeUserSatus,active_user:this.state.active_user,closeDropDown:this.closeDropDown})]})})}}]),s}(d.Component));C.contextType=O.b;t.default=C}}]);