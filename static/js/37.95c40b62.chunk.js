(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[37],{161:function(e,t,a){"use strict";a.r(t);var r=a(16),n=a(17),c=a(7),s=a(2),l=a(18),i=a(1);t.default=function(e){var t=Object(s.useContext)(l.b),a=Object(s.useState)(""),o=Object(c.a)(a,2),d=o[0],u=o[1],b=Object(s.useState)(t.getItem("client_play_mods")),p=Object(c.a)(b,1)[0],h=Object(s.useState)([]),j=Object(c.a)(h,2),m=j[0],f=j[1],x=Object(s.useState)(!1),g=Object(c.a)(x,2),O=g[0],y=g[1],w=Object(s.useState)(""),v=Object(c.a)(w,2),N=v[0],k=v[1],C=[{id:"",text:"Select Role"}];e.role&&e.role<=3&&C.push({id:3,text:"Super Master"}),e.role&&e.role<4&&C.push({id:4,text:"Master"}),e.role&&e.role<5&&C.push({id:5,text:"Client"}),Object(s.useEffect)((function(){S()}),[]);var S=function(){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),t.append("Authorization","Bearer "+localStorage.getItem("jwt"));var a=new URLSearchParams;e.user&&e.user.id&&a.append("child_id",e.user.id),fetch("https://api.royalrunbet.com/api/v1/event/getpart",{method:"POST",headers:t,body:a}).then((function(e){if(401!==e.status)return e.json()})).then((function(e){if(e.success&&e.data.length>0){for(var t=e.data?e.data:[],a=[],r=0,n=0;n<t.length;n++){r=t[n].our,t[n].downline=r;for(var c=0;c<p.length;c++)p[c].mode_id===t[n].mode_id&&(t[n].max=p[c].our,t[n].our=p[c].our-r,t[n].upline=100-p[c].our,a[c]=t[n])}f(a)}})).catch((function(e){console.log(e)}))},_=m.map((function(t,a){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsxs)("div",{className:"form-check",children:[Object(i.jsx)("input",{className:"form-check-input",checked:t.active,value:!(m.length>0)||m[a].active,type:"checkbox",onChange:function(){!function(e,t){var a=m.map((function(a){return a.mode_id===e?Object(n.a)(Object(n.a)({},a),{},{active:t}):a}));f(a)}(t.mode_id,!m[a].active)}}),Object(i.jsx)("label",{className:"form-check-label ms-1",children:t.play})]})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"text",value:m.length>0?t.upline:"",className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",readOnly:!0,tabIndex:-1})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"number",min:"0",max:m.length>0?t.max:"",value:m.length>0?t.downline:"",onChange:function(e){var n=Object(r.a)(m),c=Object(r.a)(p.filter((function(e){return e.mode_id===t.mode_id})));n[a].downline=e.target.value,c.length>0&&(n[a].our=c[0].our-e.target.value),f(Object(r.a)(n))},className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",readOnly:e.user.u_role>4,required:!0})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"text",value:m.length>0?e.user.u_role<5?t.our:t.our-100:"",className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",readOnly:!0,tabIndex:-1})})]},a)}));return Object(i.jsx)("div",{className:"col-span-12",children:Object(i.jsx)("form",{className:"bg-primary-200 dark:bg-secondary-700 opacity-95 inline-block p-2 my-1 overflow-hidden text-left align-middle transition-all transform w-full",autoComplete:"off",onSubmit:function(t){t.preventDefault();var a=new Headers;a.append("Content-Type","application/json"),a.append("Authorization","Bearer "+localStorage.getItem("jwt"));var r={method:"POST",headers:a,body:JSON.stringify({admin_password:d,partArr:m,user_id:e.user.id})};fetch("https://api.royalrunbet.com/api/v1/user/updatepart",r).then((function(e){if(401!==e.status)return e.json();y(!1)})).then((function(t){t&&t.success?e.modelClose(1,t.message):(k(t.message),setTimeout((function(e){k("")}),2e3)),y(!1)})).catch((function(e){y(!1)}))},children:Object(i.jsxs)("div",{className:"grid grid-cols-12 gap-1 text-blue-900 dark:text-blue-300  px-1 py-1",children:[_.length>0&&Object(i.jsx)("div",{className:"col-span-12 table-reponsive",children:Object(i.jsxs)("table",{className:"table table-bordered table-sm w-full",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{width:"16%",children:"Play Type"}),Object(i.jsx)("th",{width:"28%",children:"UpLine"}),Object(i.jsx)("th",{width:"28%",children:"Downline"}),Object(i.jsx)("th",{width:"28%",children:"Our Part"})]})}),Object(i.jsx)("tbody",{children:_.length>0&&_})]})}),Object(i.jsx)("div",{className:"col-span-6"}),Object(i.jsxs)("div",{className:"col-span-6",children:[Object(i.jsx)("label",{children:"Admin Password"}),Object(i.jsx)("input",{maxLength:"100",placeholder:"Admin Password",type:"password",autoComplete:"off",required:!0,defaultValue:d,onChange:function(e){return u(e.target.value)},className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700"})]}),Object(i.jsxs)("div",{className:"col-span-12",children:[Object(i.jsx)("button",{title:"Create User",type:"submit",disabled:O,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded-full focus:outline-none float-right",children:"Create"}),Object(i.jsx)("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-2 rounded-full focus:outline-none",onClick:e.modelClose,children:"Cancel"})]}),Object(i.jsx)("div",{className:"flex flex-wrap content-center text-white text-center font-semibold",children:N&&Object(i.jsx)("p",{className:"w-full max-w-sm z-20 fixed bottom-1 left-1/2 transform -translate-x-1/2  leading-10 bg-red-500",children:N})})]})})})}}}]);