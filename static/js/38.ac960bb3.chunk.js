(this["webpackJsonpsri-app"]=this["webpackJsonpsri-app"]||[]).push([[38],{164:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return i}));var r=a(7),n=a(2),s=a(18),c=a(1);function i(e){var t=Object(n.useContext)(s.b),a=Object(n.useState)(t.getItem("balance")),i=Object(r.a)(a,2),u=i[0],o=i[1],l=Object(n.useState)(t.getItem("balance")),d=Object(r.a)(l,2),p=(d[0],d[1]),b=Object(n.useState)(),j=Object(r.a)(b,2),f=j[0],m=j[1],h=Object(n.useState)(),x=Object(r.a)(h,2),O=(x[0],x[1]),g=Object(n.useState)(""),w=Object(r.a)(g,2),y=w[0],v=w[1],k=Object(n.useState)(""),S=Object(r.a)(k,2),_=S[0],N=S[1],C=Object(n.useState)(!1),I=Object(r.a)(C,2),P=I[0],T=I[1],A=Object(n.useState)(!1),L=Object(r.a)(A,2),q=L[0],D=L[1],E=Object(n.useState)(""),F=Object(r.a)(E,2),R=F[0],z=F[1];Object(n.useEffect)((function(){var t=e.user.u_role<5?e.user.up_line:-1*e.user.up_line;"withdraw"===e.modeltype&&(t*=-1),m(t),O(t)}),[]),Object(n.useEffect)((function(){!function(){var t=new Headers;t.append("Content-Type","application/x-www-form-urlencoded"),t.append("Authorization","Bearer "+localStorage.getItem("jwt"));var a=new URLSearchParams;e.user&&e.user.id&&a.append("uid",e.user.id),fetch("https://api.royalrunbet.com/api/v1/getExposerAdmin",{method:"POST",headers:t,body:a}).then((function(e){if(401!==e.status)return e.json()})).then((function(e){e&&e.success&&(o(parseInt(e.data.bal)),p(parseInt(e.data.bal)))}))}()}),[e.user]);return Object(c.jsx)("div",{className:"flex items-center justify-center",children:Object(c.jsx)("form",{autoComplete:"off",className:"bg-primary-200 dark:bg-secondary-700 opacity-95 inline-block p-2 my-1 overflow-hidden text-left align-middle transition-all transform w-full",onSubmit:function(t){t.preventDefault(),D(!0);var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded"),a.append("Authorization","Bearer "+localStorage.getItem("jwt"));var r=new URLSearchParams;e.user&&e.user.id&&(r.append("user_id",e.user.id),r.append("t_type",e.modeltype),r.append("deposite_bal",f),r.append("remark",_),r.append("p_code",e.user.p_code),e.user.u_role>4&&parseInt(e.user.up_line)<0&&r.append("auto",P),r.append("admin_password",y));fetch("https://api.royalrunbet.com/api/v1/user/plset",{method:"POST",headers:a,body:r}).then((function(e){if(401!==e.status)return e.json()})).then((function(t){t&&t.success?e.modelClose(1,t.message):(z(t.message),setTimeout((function(e){z("")}),2e3)),D(!1)})).catch((function(e){D(!1)}))},children:Object(c.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-blue-900 dark:text-blue-300  px-1 py-1",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"withdraw"===e.modeltype?"Withdraw From Pocket":"Deposite To Pocket"}),Object(c.jsx)("input",{type:"number",value:f,autoFocus:!0,onChange:function(t){m(t.target.value),function(t){var a=parseInt(t.target.value),r=u;(Number.isNaN(a)||a<0)&&(a=0),"withdraw"===e.modeltype?p(r+a):p(r-a)}(t)},min:"0",step:.01,max:Math.abs(e.user.up_line),className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"Remark"}),Object(c.jsx)("input",{type:"text",value:_,onChange:function(e){return N(e.target.value)},maxLength:"70",className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",required:!0})]}),Object(c.jsxs)("div",{className:"float-end",children:[Object(c.jsx)("label",{children:"Admin Password:"}),Object(c.jsx)("input",{type:"password",autoComplete:"off",onChange:function(e){return v(e.target.value)},className:"focus:outline-none focus:ring-2 focus:ring-gray-600 focus:border-transparent w-full py-2 px-4 text-primary-800 dark:text-white mb-2 bg-white dark:bg-primary-700",maxLength:"20",required:!0})]}),e.user.u_role>4&&parseInt(e.user.up_line)<0&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{children:"Auto Deposite"}),Object(c.jsx)("input",{type:"checkbox",checked:P,onChange:function(){T(!P)}})]})]}),Object(c.jsx)("div",{style:{clear:"both"}}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",disabled:q,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded-full focus:outline-none",children:"Transfer"})}),Object(c.jsx)("div",{children:R&&Object(c.jsx)("p",{className:"alert alert-danger",children:R})})]})})})}}}]);